"use strict";exports.id=772,exports.ids=[772],exports.modules={772:(e,t,a)=>{a.a(e,async(e,n)=>{try{a.r(t),a.d(t,{default:()=>f});var r=a(997),s=a(4661),i=a(1499),l=a(413),o=a(1323),c=a(6311),d=a(3801),u=a(7987),m=e([i,l,o,c,d,u]);function h({children:e}){let{isAuthenticated:t,isLoading:a}=(0,i.t)();return a?r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}):t?e:r.jsx(s.Navigate,{to:"/login",replace:!0})}function x({children:e}){let{isAuthenticated:t,isLoading:a}=(0,i.t)();return a?r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}):t?r.jsx(s.Navigate,{to:"/habits",replace:!0}):e}function f(){return(0,r.jsxs)(s.BrowserRouter,{children:[r.jsx("a",{href:"#main-content",className:"sr-only focus:not-sr-only focus:fixed focus:left-4 focus:top-4 focus:z-50 focus:rounded focus:bg-white focus:px-3 focus:py-2 focus:shadow",children:"Skip to content"}),(0,r.jsxs)(s.Routes,{children:[r.jsx(s.Route,{path:"/login",element:r.jsx(x,{children:r.jsx(d.Z,{})})}),r.jsx(s.Route,{path:"/*",element:r.jsx(h,{children:(0,r.jsxs)("div",{className:"mx-auto grid min-h-screen max-w-7xl grid-cols-1 lg:grid-cols-[260px_1fr]",children:[r.jsx(u.Z,{}),r.jsx("main",{id:"main-content",className:"min-h-screen",tabIndex:-1,children:(0,r.jsxs)(s.Routes,{children:[r.jsx(s.Route,{path:"/",element:r.jsx(s.Navigate,{to:"/habits",replace:!0})}),r.jsx(s.Route,{path:"/habits",element:r.jsx(c.Z,{})}),r.jsx(s.Route,{path:"/dashboard",element:r.jsx(l.Z,{})}),r.jsx(s.Route,{path:"/habit/:id",element:r.jsx(o.Z,{})})]})})]})})})]})]})}[i,l,o,c,d,u]=m.then?(await m)():m,n()}catch(e){n(e)}})},5623:(e,t,a)=>{a.a(e,async(e,n)=>{try{a.d(t,{Z:()=>d});var r=a(997),s=a(6689),i=a(6658),l=a(3902),o=a(2381),c=e([i]);i=(c.then?(await c)():c)[0];let u=[{value:"daily",label:"Daily"},{value:"weekly",label:"Weekly"},{value:"monthly",label:"Monthly"}];function d({initialValue:e,onSubmit:t,onCancel:a}){let{habits:n}=(0,i.F)(),[c,d]=(0,s.useState)(e?.name||""),[m,h]=(0,s.useState)(e?.description||""),[x,f]=(0,s.useState)(e?.periodType||"daily"),[b,g]=(0,s.useState)(e?.frequency||1),[p,y]=(0,s.useState)(e?.category||""),[w,j]=(0,s.useState)(e?.icon||"check_circle"),[v,N]=(0,s.useState)({}),k=(0,s.useId)(),M=`name-${k}`,C=`description-${k}`,T=`period-${k}`,D=`frequency-${k}`,S=`category-${k}`,P=`categories-${k}`,E=Array.from(new Set((n||[]).map(e=>e.category).filter(Boolean))).sort((e,t)=>e.localeCompare(t));return(0,r.jsxs)("form",{onSubmit:function(a){if(a.preventDefault(),!function(){let e={};c.trim()||(e.name="Name is required");let t=Number(b);return(!Number.isInteger(t)||t<1)&&(e.frequency="Frequency must be an integer ≥ 1"),N(e),0===Object.keys(e).length}())return;let n=(0,l.b)(new Date).getTime(),r={...e?.id?{id:e.id}:{},name:c.trim(),description:m.trim()||void 0,periodType:x,frequency:Number(b),category:p.trim()||void 0,icon:w,startDate:n};t?.(r)},className:"space-y-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:M,className:"block mb-1 text-sm font-medium",children:"Name"}),r.jsx("input",{id:M,name:"name",value:c,onChange:e=>d(e.target.value),className:"w-full rounded border border-slate-300 bg-[#f7f1e4] px-3 py-2 focus:border-slate-400 focus:outline-none","aria-invalid":!!v.name,"aria-describedby":v.name?`${M}-error`:void 0,required:!0}),v.name?r.jsx("p",{id:`${M}-error`,className:"mt-1 text-sm text-red-600",children:v.name}):null]}),(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:C,className:"block mb-1 text-sm font-medium",children:"Description"}),r.jsx("textarea",{id:C,name:"description",value:m,onChange:e=>h(e.target.value),className:"w-full rounded border border-slate-300 bg-[#f7f1e4] px-3 py-2 focus:border-slate-400 focus:outline-none",rows:3})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:T,className:"block mb-1 text-sm font-medium",children:"Period"}),r.jsx("select",{id:T,name:"periodType",value:x,onChange:e=>f(e.target.value),className:"w-full rounded border border-slate-300 bg-[#f7f1e4] px-3 py-2 focus:border-slate-400 focus:outline-none",children:u.map(e=>r.jsx("option",{value:e.value,children:e.label},e.value))})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:D,className:"block mb-1 text-sm font-medium",children:"Frequency"}),r.jsx("input",{id:D,name:"frequency",type:"number",min:1,step:1,value:b,onChange:e=>g(e.target.value),className:"w-full rounded border border-slate-300 bg-[#f7f1e4] px-3 py-2 focus:border-slate-400 focus:outline-none","aria-invalid":!!v.frequency,"aria-describedby":v.frequency?`${D}-error`:void 0}),v.frequency?r.jsx("p",{id:`${D}-error`,className:"mt-1 text-sm text-red-600",children:v.frequency}):null]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:S,className:"block mb-1 text-sm font-medium",children:"Category"}),r.jsx("input",{id:S,name:"category",value:p,onChange:e=>y(e.target.value),className:"w-full rounded border border-slate-300 bg-[#f7f1e4] px-3 py-2 focus:border-slate-400 focus:outline-none",list:P,placeholder:E.length?"Type or choose…":"Type a category",autoComplete:"off"}),E.length?r.jsx("datalist",{id:P,children:E.map(e=>r.jsx("option",{value:e},e))}):null]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block mb-2 text-sm font-medium",children:"Icon"}),r.jsx(o.Z,{value:w,onChange:j})]}),(0,r.jsxs)("div",{className:"flex gap-2 justify-end",children:[r.jsx("button",{type:"button",onClick:a,className:"btn btn-secondary",children:"Cancel"}),r.jsx("button",{type:"submit",className:"btn btn-primary",children:"Save"})]})]})}n()}catch(e){n(e)}})},689:(e,t,a)=>{a.a(e,async(e,n)=>{try{a.d(t,{Z:()=>x});var r=a(997),s=a(6689),i=a(4661),l=a(6658),o=a(7541),c=a(1814),d=a(4709),u=a(8047),m=a(5623),h=e([l,m]);function x(){let{habits:e,completions:t,addCompletion:a,undoLastCompletion:n,deleteHabit:h,updateHabit:x}=(0,l.F)(),[f,b]=(0,s.useState)(null),g=(0,s.useMemo)(()=>e.map(e=>{let s=t.filter(t=>t.habitId===e.id),l=(0,o.GR)(e,s),u=l.value>=e.frequency,{start:m,end:x}=(0,c.p6)(e),f=s.some(e=>e.timestamp>=m&&e.timestamp<x);return(0,r.jsxs)("div",{className:"p-4 card",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,r.jsxs)("div",{className:"flex gap-2 items-center",children:[r.jsx("span",{className:"material-icons text-slate-700",children:e.icon}),(0,r.jsxs)("div",{children:[r.jsx("div",{className:"text-base font-semibold",children:e.name}),r.jsx("div",{className:"text-xs text-slate-500",children:e.category||"Uncategorized"})]}),r.jsx(i.Link,{to:`/habit/${e.id}`,className:"ml-1 btn btn-secondary btn-icon","aria-label":"View stats",title:"View stats",children:r.jsx("span",{className:"material-icons",children:"insights"})})]}),(0,r.jsxs)("div",{className:`text-sm ${u?"text-green-700":"text-slate-600"}`,children:[l.value,"/",e.frequency]})]}),r.jsx(d.Z,{value:l.value,max:e.frequency}),(0,r.jsxs)("div",{className:"flex justify-between items-center mt-3",children:[(0,r.jsxs)("div",{className:"flex flex-wrap gap-2 items-center",children:[r.jsx("button",{onClick:()=>a(e.id,Date.now()),disabled:u,className:`btn btn-primary btn-icon ${u?"opacity-60":""}`,"aria-label":"Quick complete",title:"Quick complete",children:r.jsx("span",{className:"material-icons",children:"check_circle"})}),r.jsx("button",{onClick:()=>n(e.id),disabled:!f,className:"btn btn-secondary btn-icon","aria-label":"Undo last completion",title:"Undo last completion",children:r.jsx("span",{className:"material-icons",children:"undo"})})]}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-2 items-center",children:[r.jsx("button",{onClick:()=>b(e),className:"btn btn-secondary btn-icon","aria-label":"Edit habit",title:"Edit habit",children:r.jsx("span",{className:"material-icons",children:"edit"})}),r.jsx("button",{onClick:()=>{confirm("Delete habit and its completions?")&&h(e.id)},className:"btn btn-danger btn-icon","aria-label":"Delete habit",title:"Delete habit",children:r.jsx("span",{className:"material-icons",children:"delete"})})]})]})]},e.id)}),[e,t,a,n,h]);return(0,r.jsxs)("div",{className:"space-y-3",children:[g,r.jsx(u.Z,{isOpen:!!f,onClose:()=>b(null),title:"Edit Habit",children:f?r.jsx(m.Z,{initialValue:f,onSubmit:function(e){x(f.id,e),b(null)},onCancel:()=>b(null)}):null})]})}[l,m]=h.then?(await h)():h,n()}catch(e){n(e)}})},2381:(e,t,a)=>{a.d(t,{Z:()=>s});var n=a(997);let r=["check_circle","fitness_center","self_improvement","book","menu_book","water_drop","restaurant","directions_run","brush","music_note","bedtime"];function s({value:e,onChange:t}){return n.jsx("div",{className:"grid grid-cols-8 gap-2",children:r.map(a=>n.jsx("button",{type:"button",onClick:()=>t?.(a),className:`material-icons rounded border border-slate-300 bg-[#f7f1e4] p-2 text-slate-700 hover:bg-slate-100 ${e===a?"ring-2 ring-slate-400":""}`,"aria-pressed":e===a,"aria-label":a,children:a},a))})}},8047:(e,t,a)=>{a.d(t,{Z:()=>s});var n=a(997),r=a(6689);function s({isOpen:e,onClose:t,title:a,children:s,footer:i}){let l=(0,r.useRef)(null);return((0,r.useRef)(null),e)?n.jsx("div",{className:"flex fixed inset-0 z-50 justify-center items-center backdrop-blur-sm bg-black/20",role:"dialog","aria-modal":"true",children:(0,n.jsxs)("div",{ref:l,tabIndex:-1,className:"mx-4 w-full max-w-xl rounded-xl border border-slate-200 bg-[#f6f0e3] p-6 shadow-xl outline-none",role:"document","aria-labelledby":"modal-title",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[n.jsx("h2",{id:"modal-title",className:"text-lg font-semibold",children:a}),n.jsx("button",{onClick:t,"aria-label":"Close",className:"material-icons text-slate-600 hover:text-slate-900",children:"close"})]}),n.jsx("div",{className:"mb-2",children:s}),i?n.jsx("div",{className:"flex gap-2 justify-end mt-4",children:i}):null]})}):null}},4709:(e,t,a)=>{a.d(t,{Z:()=>r});var n=a(997);function r({value:e,max:t,variant:a="bar",size:r=120,stroke:s=10,label:i}){let l=Math.max(0,Math.min(1,(e||0)/(t||1)));if("circle"===a){let a=(r-s)/2,o=2*Math.PI*a,c=o*l;return(0,n.jsxs)("div",{role:"progressbar","aria-label":i||"Progress","aria-valuemin":0,"aria-valuemax":t,"aria-valuenow":e,"aria-valuetext":`${e??0} of ${t??0}`,className:"inline-flex items-center justify-center",style:{width:r,height:r},children:[(0,n.jsxs)("svg",{width:r,height:r,viewBox:`0 0 ${r} ${r}`,children:[n.jsx("circle",{cx:r/2,cy:r/2,r:a,fill:"none",strokeWidth:s,className:"text-slate-200 dark:text-slate-700",stroke:"currentColor"}),n.jsx("circle",{cx:r/2,cy:r/2,r:a,fill:"none",strokeWidth:s,strokeLinecap:"round",className:"text-green-500",strokeDasharray:`${c} ${o-c}`,transform:`rotate(-90 ${r/2} ${r/2})`,stroke:"currentColor"})]}),(0,n.jsxs)("div",{className:"absolute text-center",children:[(0,n.jsxs)("div",{className:"text-xl font-semibold",children:[e??0,"/",t??0]}),i?n.jsx("div",{className:"text-xs text-slate-500",children:i}):null]})]})}return n.jsx("div",{className:"overflow-hidden w-full h-2 rounded bg-slate-200 dark:bg-slate-700",role:"progressbar","aria-label":i||"Progress","aria-valuemin":0,"aria-valuemax":t,"aria-valuenow":e,"aria-valuetext":`${e??0} of ${t??0}`,children:n.jsx("div",{className:"h-full bg-green-500",style:{width:`${100*l}%`}})})}},7987:(e,t,a)=>{a.a(e,async(e,n)=>{try{a.d(t,{Z:()=>u});var r=a(997),s=a(6689),i=a(4661),l=a(1499),o=a(8047),c=e([l]);function d({isActive:e}){return`flex items-center gap-2 rounded-lg px-3 py-1.5 text-sm ${e?"bg-slate-200 text-slate-900":"hover:bg-slate-100 text-slate-800"}`}function u(){let[e,t]=(0,s.useState)(!1),[a,n]=(0,s.useState)(!1),{user:c,logout:u}=(0,l.t)(),m=async()=>{await u(),n(!1)};return(0,r.jsxs)(r.Fragment,{children:[r.jsx("button",{className:"fixed right-4 bottom-4 z-40 p-3 text-white rounded-full shadow bg-slate-700 lg:hidden","aria-label":e?"Close menu":"Open menu","aria-expanded":e,"aria-controls":"primary-navigation",onClick:()=>t(e=>!e),children:r.jsx("span",{className:"material-icons",children:"menu"})}),(0,r.jsxs)("aside",{className:`bg-[#f6efdf] p-4 border-r lg:block ${e?"fixed inset-y-0 left-0 z-30 w-64":"hidden"} lg:static lg:w-auto`,"aria-label":"Primary",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6 text-lg font-semibold text-slate-800",children:[r.jsx("span",{children:"Habit Tracker"}),r.jsx("button",{className:"btn btn-secondary btn-icon lg:hidden","aria-label":"Close",onClick:()=>t(!1),children:r.jsx("span",{className:"material-icons",children:"close"})})]}),(0,r.jsxs)("nav",{id:"primary-navigation",className:"flex flex-col gap-2 mb-6","aria-label":"Primary",children:[(0,r.jsxs)(i.NavLink,{to:"/habits",className:d,onClick:()=>t(!1),children:[r.jsx("span",{className:"text-base material-icons",children:"checklist"}),r.jsx("span",{children:"Habits"})]}),(0,r.jsxs)(i.NavLink,{to:"/dashboard",className:d,onClick:()=>t(!1),children:[r.jsx("span",{className:"text-base material-icons",children:"dashboard"}),r.jsx("span",{children:"Dashboard"})]})]}),c&&(0,r.jsxs)("div",{className:"border-t pt-4 mt-auto",children:[r.jsx("div",{className:"text-xs text-slate-600 mb-2",children:"Signed in as:"}),r.jsx("div",{className:"text-sm font-medium text-slate-800 mb-3 truncate",children:c.name||c.email}),(0,r.jsxs)("button",{onClick:()=>{n(!0)},className:"flex items-center gap-2 rounded-lg px-3 py-1.5 text-sm hover:bg-slate-100 text-slate-800 w-full",children:[r.jsx("span",{className:"text-base material-icons",children:"logout"}),r.jsx("span",{children:"Sign Out"})]})]})]}),r.jsx(o.Z,{isOpen:a,onClose:()=>n(!1),title:"Confirm Sign Out",children:(0,r.jsxs)("div",{className:"space-y-4",children:[r.jsx("p",{className:"text-sm text-slate-600",children:"Are you sure you want to sign out?"}),(0,r.jsxs)("div",{className:"flex gap-2 justify-end",children:[r.jsx("button",{onClick:()=>n(!1),className:"btn btn-secondary",children:"Cancel"}),r.jsx("button",{onClick:m,className:"btn btn-danger",children:"Sign Out"})]})]})})]})}l=(c.then?(await c)():c)[0],n()}catch(e){n(e)}})},413:(e,t,a)=>{a.a(e,async(e,n)=>{try{a.d(t,{Z:()=>g});var r=a(997),s=a(3902),i=a(9481),l=a(4422),o=a(4102),c=a(5005),d=a(2184),u=a(6689),m=a(4661),h=a(6658),x=a(7541),f=a(1814),b=e([h]);function g(){let{habits:e,completions:t,rehydrate:a,persistenceError:n}=(0,h.F)(),[b,g]=(0,u.useState)(!0),[p,y]=(0,u.useState)(7),[w,j]=(0,u.useState)(""),[v,N]=(0,u.useState)("all"),k=(0,m.useNavigate)(),[M,C]=(0,u.useState)(""),T=new Date,D=(0,s.b)(T).getTime(),S=(0,i.E)((0,s.b)(T),1-p).getTime(),P=(0,i.E)((0,s.b)(T),1).getTime(),E=(0,u.useCallback)((e,t)=>{let a=(0,s.b)(new Date((0,f.mI)(e)));if("daily"===e.periodType){let e=(0,i.E)(a,t),n=(0,i.E)(a,t+1);return{start:e.getTime(),end:n.getTime()}}if("monthly"===e.periodType){let e=(0,l.z)((0,o.N)(a),t),n=(0,l.z)((0,o.N)(a),t+1);return{start:e.getTime(),end:n.getTime()}}let n=(0,i.E)(a,7*t),r=(0,i.E)(a,(t+1)*7);return{start:n.getTime(),end:r.getTime()}},[]),L=(0,u.useCallback)((e,t)=>{let a=(0,f.NM)(e,S),n=(0,f.NM)(e,P-1),r=0,s=0;for(let i=a;i<=n;i++){let a=E(e,i);if(a.end<=S||a.start>=P)continue;r+=e.frequency;let n=t.filter(e=>e.timestamp>=a.start&&e.timestamp<a.end);s+=Math.min(n.length,e.frequency)}return{scheduled:r,completed:s}},[S,P,E]),q=(0,u.useCallback)((e,t)=>{let a=(0,f.NM)(e,S),n=(0,f.NM)(e,P-1),r=0;for(let i=a;i<=n;i++){let a=E(e,i);if(a.end<=S||a.start>=P)continue;let n=(0,s.b)(new Date(e.startDate?e.startDate:e.createdAt)).getTime();if(a.end<=n||a.end>Date.now())continue;let l=t.filter(e=>e.timestamp>=a.start&&e.timestamp<a.end),o=Math.min(l.length,e.frequency);r+=Math.max(0,e.frequency-o)}return r},[S,P,E]),W=(0,u.useMemo)(()=>(0,c.D)({start:new Date(S),end:new Date(D)}),[S,D]),$=(0,u.useMemo)(()=>t.filter(e=>e.timestamp>=S&&e.timestamp<P),[t,S,P]),F=(0,u.useMemo)(()=>{let e=new Map;for(let a of t){let t=(0,s.b)(new Date(a.timestamp)).getTime();e.set(t,(e.get(t)||0)+1)}return e},[t]),A=(0,u.useMemo)(()=>{let a=0,n=0;for(let r of e){let e=t.filter(e=>e.habitId===r.id),{completed:s}=L(r,e);a+=s,n+=q(r,e)}let r=$.length,s=n,i=a+s,l=i>0?a/i:0;return{totalCompletions:r,misses:s,completionRate:l}},[e,t,$,q,L]),O=(0,u.useMemo)(()=>{if(0===e.length)return{current:0,longest:0};let t=Math.min(...e.map(e=>e.startDate||D)),a=(0,c.D)({start:new Date((0,s.b)(new Date(t)).getTime()),end:new Date(D)}),n=0,r=0,i=0;for(let e of a){let t=(0,s.b)(e).getTime();(F.get(t)||0)>0?(i+=1)>r&&(r=i):i=0}for(let e=a.length-1;e>=0;e--){let t=(0,s.b)(a[e]).getTime();if((F.get(t)||0)>0)n+=1;else break}return{current:n,longest:r}},[e,F,D]),H=(0,u.useMemo)(()=>{let t=w.trim().toLowerCase(),a=t?e.filter(e=>e.name.toLowerCase().includes(t)):e;return"all"===v?a:a.filter(e=>e.periodType===v)},[e,w,v]);function Y(){return r.jsx("button",{onClick:()=>{g(!0),Promise.resolve(a()).finally(()=>g(!1))},className:"btn btn-secondary",children:"Retry"})}function z({label:e,value:t,alt:a}){return(0,r.jsxs)("div",{className:"p-3 card","aria-busy":b,"aria-live":"polite",children:[r.jsx("div",{className:"text-sm text-slate-500",children:e}),r.jsx("div",{className:"text-2xl font-semibold","aria-label":a||e,children:t})]})}return(0,r.jsxs)("div",{className:"p-6",role:"main","aria-labelledby":"page-title",children:[r.jsx("div",{"aria-live":"polite",className:"sr-only",children:M}),(0,r.jsxs)("div",{className:"flex flex-col gap-3 mb-6 md:flex-row md:items-center md:justify-between",children:[r.jsx("h1",{id:"page-title",className:"text-2xl font-bold",children:"Dashboard"}),(0,r.jsxs)("div",{className:"flex gap-2 items-center",role:"group","aria-label":"Date range",children:[r.jsx("button",{className:`btn ${7===p?"btn-primary":"btn-secondary"}`,"aria-pressed":7===p,onClick:()=>y(7),children:"7 days"}),r.jsx("button",{className:`btn ${30===p?"btn-primary":"btn-secondary"}`,"aria-pressed":30===p,onClick:()=>y(30),children:"30 days"})]})]}),n?r.jsx("div",{className:"p-3 mb-4 text-amber-700 bg-amber-50 rounded border border-amber-400",role:"alert",children:n}):null,b?r.jsx("section",{className:"grid grid-cols-1 gap-3 mb-6 text-sm md:grid-cols-3 lg:grid-cols-5",children:Array.from({length:5}).map((e,t)=>r.jsx("div",{className:"p-3 h-20 animate-pulse card"},t))}):(0,r.jsxs)("section",{className:"grid grid-cols-1 gap-3 mb-6 text-sm md:grid-cols-3 lg:grid-cols-5",children:[r.jsx(z,{label:"Current Streak",value:O.current}),r.jsx(z,{label:"Longest Streak",value:O.longest}),r.jsx(z,{label:"Completion Rate",value:`${Math.round(100*A.completionRate)}%`}),r.jsx(z,{label:"Total Completions",value:A.totalCompletions}),r.jsx(z,{label:"Misses",value:A.misses})]}),(0,r.jsxs)("section",{className:"grid grid-cols-1 gap-4 mb-6 lg:grid-cols-2",children:[b?r.jsx("div",{className:"p-4 h-60 animate-pulse card"}):r.jsx(function(){if(n)return(0,r.jsxs)("div",{className:"p-4 card",role:"region","aria-label":"Completions trend",children:[r.jsx("div",{className:"mb-2 text-sm text-red-700",children:"Failed to load data."}),r.jsx(Y,{})]});let e=W.map(e=>F.get((0,s.b)(e).getTime())||0),t=e.reduce((e,t)=>e+t,0);if(0===t)return(0,r.jsxs)("div",{className:"p-4 card",role:"region","aria-label":"Completions trend",children:[r.jsx("div",{className:"mb-3 text-sm font-medium",children:"Daily completions (trend)"}),r.jsx("div",{className:"text-sm text-slate-600",children:"No completions in this range."})]});let a=Math.max(1,...e),i=e.length>1?360/(e.length-1):0,l=e.map((e,t)=>[Math.round(t*i),Math.round(120-e/a*120)]).map(([e,t],a)=>`${0===a?"M":"L"} ${e} ${t}`).join(" "),o=`${l} L 360 120 L 0 120 Z`;return(0,r.jsxs)("div",{className:"p-4 card",role:"region","aria-label":"Completions trend",children:[r.jsx("div",{className:"mb-3 text-sm font-medium",children:"Daily completions (trend)"}),r.jsx("div",{className:"w-full",children:(0,r.jsxs)("svg",{viewBox:"0 0 360 120",role:"img","aria-label":"Line chart of daily completions",className:"w-full h-40",children:[r.jsx("defs",{children:(0,r.jsxs)("linearGradient",{id:"trendFill",x1:"0",y1:"0",x2:"0",y2:"1",children:[r.jsx("stop",{offset:"0%",stopColor:"#475569",stopOpacity:"0.25"}),r.jsx("stop",{offset:"100%",stopColor:"#475569",stopOpacity:"0.05"})]})}),r.jsx("path",{d:o,fill:"url(#trendFill)"}),r.jsx("path",{d:l,fill:"none",stroke:"#334155",strokeWidth:"2"})]})})]})},{}),b?r.jsx("div",{className:"p-4 h-60 animate-pulse card"}):r.jsx(function(){if(n)return(0,r.jsxs)("div",{className:"p-4 card",role:"region","aria-label":"Completions by weekday",children:[r.jsx("div",{className:"mb-2 text-sm text-red-700",children:"Failed to load data."}),r.jsx(Y,{})]});let e=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],t=["#f59e0b","#10b981","#3b82f6","#8b5cf6","#ef4444","#14b8a6","#f97316"],a=[0,0,0,0,0,0,0];for(let e of W){let t=(0,s.b)(e).getTime(),n=(0,d.w)(e);a[n]+=F.get(t)||0}let i=a.reduce((e,t)=>e+t,0);if(0===i)return(0,r.jsxs)("div",{className:"p-4 card",role:"region","aria-label":"Completions by weekday",children:[r.jsx("div",{className:"mb-3 text-sm font-medium",children:"Completions by weekday"}),r.jsx("div",{className:"text-sm text-slate-600",children:"No data to show for this range."})]});let l=2*Math.PI*52,o=0;return(0,r.jsxs)("div",{className:"p-4 card",role:"region","aria-label":"Completions by weekday",children:[r.jsx("div",{className:"mb-3 text-sm font-medium",children:"Completions by weekday"}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsxs)("svg",{viewBox:"0 0 140 140",className:"w-40 h-40",role:"img","aria-label":"Donut chart of completions by weekday",children:[r.jsx("circle",{cx:"70",cy:"70",r:52,fill:"none",stroke:"#e5e7eb",strokeWidth:"18"}),a.map((e,a)=>{if(0===e)return null;let n=e/i*l,s=r.jsx("circle",{cx:"70",cy:"70",r:52,fill:"none",stroke:t[a],strokeWidth:"18",strokeDasharray:`${n} ${l-n}`,strokeDashoffset:-o,transform:"rotate(-90 70 70)"},a);return o+=n,s}),r.jsx("text",{x:"70",y:"70",textAnchor:"middle",dominantBaseline:"central",className:"fill-slate-700",fontSize:"14",children:i})]}),r.jsx("ul",{className:"text-sm space-y-1",children:a.map((a,n)=>(0,r.jsxs)("li",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"inline-block w-3 h-3 rounded",style:{backgroundColor:t[n]}}),r.jsx("span",{className:"text-slate-700 w-8",children:e[n]}),(0,r.jsxs)("span",{className:"text-slate-500",children:[a," (",Math.round(a/i*100),"%)"]})]},n))})]})]})},{})]}),(0,r.jsxs)("section",{className:"flex gap-2 justify-between items-center mb-3",children:[r.jsx("h2",{className:"text-lg font-semibold",children:"Per-habit breakdown"}),(0,r.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,r.jsxs)("select",{value:v,onChange:e=>N(e.target.value),className:"rounded border border-slate-300 bg-[#f7f1e4] px-2 py-1.5 text-sm focus:border-slate-400 focus:outline-none","aria-label":"Filter by period",children:[r.jsx("option",{value:"all",children:"All periods"}),r.jsx("option",{value:"daily",children:"Daily"}),r.jsx("option",{value:"weekly",children:"Weekly"}),r.jsx("option",{value:"monthly",children:"Monthly"})]}),r.jsx("input",{type:"search",placeholder:"Search habits…",value:w,onChange:e=>j(e.target.value),className:"rounded border border-slate-300 bg-[#f7f1e4] px-3 py-1.5 text-sm focus:border-slate-400 focus:outline-none","aria-label":"Search habits"})]})]}),b?r.jsx("div",{className:"p-6 h-60 animate-pulse card"}):r.jsx(function(){if(0===e.length)return(0,r.jsxs)("div",{className:"p-6 text-center card",children:[r.jsx("div",{className:"mb-2 text-lg font-semibold",children:"No habits yet"}),r.jsx("p",{className:"mb-4 text-sm text-slate-600",children:"Create your first habit to start tracking progress."}),(0,r.jsxs)(m.Link,{to:"/habits",className:"btn btn-primary",children:[r.jsx("span",{className:"text-white align-middle material-icons",children:"add"}),r.jsx("span",{className:"ml-1 align-middle",children:"Create Habit"})]})]});if(n)return(0,r.jsxs)("div",{className:"p-4 card",children:[r.jsx("div",{className:"mb-2 text-sm text-red-700",children:"Failed to load habits."}),r.jsx(Y,{})]});let a=H.map(e=>{let a=t.filter(t=>t.habitId===e.id),{currentStreak:n,bestStreak:r}=(0,x.wm)(e,a),{completed:s}=L(e,a),i=q(e,a),l=s+i;return{habit:e,currentStreak:n,bestStreak:r,rate:l>0?Math.round(s/l*100):0,misses:i}});return r.jsx("div",{className:"overflow-x-auto p-0 card",children:(0,r.jsxs)("table",{className:"min-w-full text-sm",children:[r.jsx("thead",{children:(0,r.jsxs)("tr",{className:"text-left text-slate-600",children:[r.jsx("th",{className:"px-3 py-2",children:"Habit"}),r.jsx("th",{className:"px-3 py-2",children:"Current Streak"}),r.jsx("th",{className:"px-3 py-2",children:"Longest Streak"}),r.jsx("th",{className:"px-3 py-2",children:"Completion Rate"}),r.jsx("th",{className:"px-3 py-2",children:"Misses"}),r.jsx("th",{className:"px-3 py-2"})]})}),r.jsx("tbody",{children:a.map(({habit:e,currentStreak:t,bestStreak:a,rate:n,misses:s})=>(0,r.jsxs)("tr",{className:"border-t cursor-pointer border-slate-200 hover:bg-stone-100 focus-within:bg-stone-100",onClick:()=>k(`/habit/${e.id}`),tabIndex:0,onKeyDown:t=>{("Enter"===t.key||" "===t.key)&&k(`/habit/${e.id}`)},"aria-label":`View ${e.name}`,children:[r.jsx("td",{className:"px-3 py-2",children:(0,r.jsxs)("div",{className:"flex gap-2 items-center",children:[r.jsx("span",{className:"material-icons text-slate-700",children:e.icon}),r.jsx("div",{className:"font-medium",children:e.name})]})}),r.jsx("td",{className:"px-3 py-2",children:t}),r.jsx("td",{className:"px-3 py-2",children:a}),(0,r.jsxs)("td",{className:"px-3 py-2",children:[n,"%"]}),r.jsx("td",{className:"px-3 py-2",children:s}),r.jsx("td",{className:"px-3 py-2 text-right",children:r.jsx(m.Link,{to:`/habit/${e.id}`,className:"btn btn-secondary",onClick:e=>e.stopPropagation(),children:"View"})})]},e.id))})]})})},{})]})}h=(b.then?(await b)():b)[0],n()}catch(e){n(e)}})},1323:(e,t,a)=>{a.a(e,async(e,n)=>{try{a.d(t,{Z:()=>b});var r=a(997),s=a(3902),i=a(7507),l=a(2449),o=a(404),c=a(6689),d=a(4661),u=a(4709),m=a(6658),h=a(7541),x=a(1814),f=e([m]);function b(){let{id:e}=(0,d.useParams)(),{habits:t,completions:a,addCompletion:n,undoLastCompletion:f}=(0,m.F)(),b=t.find(t=>t.id===e),g=a.filter(t=>t.habitId===e),[p,y]=(0,c.useState)("30"),w=(0,c.useMemo)(()=>{if(!b)return null;let e=(0,h.GR)(b,g),{currentStreak:t,bestStreak:a}=(0,h.wm)(b,g),n=(0,h.e0)(b,g),r=(0,h.u8)(b,g);return{progress:e,currentStreak:t,bestStreak:a,failCount:n,record:r}},[b,g]);if(!b)return(0,r.jsxs)("div",{className:"mx-auto max-w-3xl p-4",children:[r.jsx(d.Link,{to:"/",className:"text-sm hover:underline",children:"← Back"}),r.jsx("div",{className:"mt-4",children:"Habit not found."})]});let j=(w?.progress.value||0)>=(b.frequency||1),v=(0,x.gx)(b),N=(0,x.QL)(b),k=(0,x.wc)(N),M=(0,x.sm)(b.periodType),C="weekly"===b.periodType?"week":"monthly"===b.periodType?"month":"day";async function T(){await f(b.id)}let D=g.slice().sort((e,t)=>t.timestamp-e.timestamp).find(e=>{let t=(0,s.b)(new Date).getTime();return e.timestamp>=t&&e.timestamp<t+864e5}),S=g.slice().sort((e,t)=>t.timestamp-e.timestamp),P="all"===p?0:Date.now()-864e5*Number(p),E=S.filter(e=>e.timestamp>=P),L=new Map;for(let e of E){let t=(0,s.b)(new Date(e.timestamp)).getTime(),a=L.get(t)||[];a.push(e),L.set(t,a)}let q=Array.from(L.entries()).sort((e,t)=>t[0]-e[0]);return(0,r.jsxs)("div",{className:"mx-auto max-w-4xl p-6",children:[(0,r.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx(d.Link,{to:"/",className:"hover:underline",children:"Habits"}),r.jsx("span",{className:"text-slate-400",children:"›"}),r.jsx("span",{className:"text-slate-600",children:b.name})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"material-icons text-slate-700",children:b.icon}),r.jsx("h1",{className:"text-2xl font-bold",children:b.name})]}),(0,r.jsxs)("div",{className:"hidden md:flex items-center gap-2 ml-3",children:[r.jsx("span",{className:"px-2 py-1 rounded-full bg-slate-100 text-slate-600 text-xs",children:M}),(0,r.jsxs)("span",{className:"px-2 py-1 rounded-full bg-slate-100 text-slate-600 text-xs",children:["Target ",b.frequency,"/",C]})]}),r.jsx("div",{className:"ml-4",children:j?(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)("span",{className:"px-3 py-2 rounded bg-green-50 text-green-700 text-sm",children:["Done ",v.toLowerCase()]}),D?r.jsx("button",{onClick:T,className:"text-sm text-slate-600 hover:underline",children:"Undo"}):null]}):r.jsx("button",{onClick:function(){n(b.id)},className:"btn btn-primary",children:"Mark done"})})]})]}),(0,r.jsxs)("div",{className:"mb-8 grid grid-cols-1 gap-6 md:grid-cols-3",children:[r.jsx("div",{className:"flex items-center justify-center md:col-span-1",children:(0,r.jsxs)("div",{className:"relative",children:[r.jsx(u.Z,{value:w?.progress.value||0,max:b.frequency,variant:"circle",size:160,stroke:12,label:v}),(0,r.jsxs)("div",{className:"mt-2 text-center text-xs text-slate-500",children:["Resets in ",k]})]})}),(0,r.jsxs)("div",{className:"md:col-span-2 grid grid-cols-2 gap-3 text-sm sm:grid-cols-3",children:[(0,r.jsxs)("div",{className:"rounded border p-3",children:[r.jsx("div",{className:"text-slate-500",children:"Streak"}),r.jsx("div",{className:"text-xl font-semibold",children:w?.currentStreak||0})]}),(0,r.jsxs)("div",{className:"rounded border p-3",children:[r.jsx("div",{className:"text-slate-500",children:"Best streak"}),r.jsx("div",{className:"text-xl font-semibold",children:w?.bestStreak||0})]}),(0,r.jsxs)("div",{className:"rounded border p-3",children:[r.jsx("div",{className:"text-slate-500",children:"Missed"}),r.jsx("div",{className:"text-xl font-semibold",children:w?.failCount||0})]})]})]}),(0,r.jsxs)("div",{className:"mt-6",children:[(0,r.jsxs)("div",{className:"mb-3 flex items-center justify-between",children:[r.jsx("h2",{className:"text-lg font-semibold",children:"Activity"}),r.jsx("div",{className:"flex gap-1 text-xs",children:["7","30","all"].map(e=>r.jsx("button",{onClick:()=>y(e),className:`px-2 py-1 rounded ${p===e?"bg-slate-900 text-white":"bg-slate-100 text-slate-600"}`,children:"all"===e?"All":`${e}d`},e))})]}),0===q.length?r.jsx("div",{className:"text-sm text-slate-600",children:"No activity in this range."}):r.jsx("div",{className:"space-y-4",children:q.map(([e,t])=>(0,r.jsxs)("div",{children:[r.jsx("div",{className:"mb-2 text-sm font-medium text-slate-700",children:function(e){let t=new Date(e);return(0,i.z)(t)?"Today":(0,l.g)(t)?"Yesterday":(0,o.WU)(t,"MMM d, yyyy")}(e)}),r.jsx("ul",{className:"space-y-2 text-sm",children:t.map((t,a)=>(0,r.jsxs)("li",{className:"flex items-center justify-between rounded border p-2 dark:border-slate-700",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[r.jsx("span",{children:(0,o.WU)(new Date(t.timestamp),"p")}),r.jsx("span",{className:"text-slate-500",children:function(e){let t=(0,x.NM)(b,e);return"weekly"===b.periodType?`Week ${t+1}`:"monthly"===b.periodType?`Month ${t+1}`:`Day ${t+1}`}(t.timestamp)})]}),0===a&&(0,i.z)(new Date(e))?r.jsx("button",{onClick:T,className:"text-xs text-slate-600 hover:underline",children:"Undo"}):null]},t.id))})]},e))})]})]})}m=(f.then?(await f)():f)[0],n()}catch(e){n(e)}})},6311:(e,t,a)=>{a.a(e,async(e,n)=>{try{a.d(t,{Z:()=>u});var r=a(997),s=a(6689),i=a(6658),l=a(689),o=a(8047),c=a(5623),d=e([i,l,c]);function u(){let{habits:e,completions:t,rehydrate:a,createHabit:n,persistenceError:d}=(0,i.F)(),[u,m]=(0,s.useState)(!1),h=(0,s.useMemo)(()=>({totalCompletions:t.length,totalHabits:e.length}),[e,t]);return(0,r.jsxs)("div",{className:"p-6",role:"main","aria-labelledby":"page-title",children:[r.jsx("div",{className:"flex justify-between items-center mb-6",children:r.jsx("h1",{id:"page-title",className:"text-2xl font-bold",children:"Habits"})}),d?r.jsx("div",{className:"p-3 mb-4 text-amber-700 bg-amber-50 rounded border border-amber-400",role:"alert",children:d}):null,(0,r.jsxs)("section",{className:"grid grid-cols-3 gap-3 mb-6 text-sm",children:[(0,r.jsxs)("div",{className:"p-3 card",children:[r.jsx("div",{className:"text-slate-500",children:"Total habits"}),r.jsx("div",{className:"text-xl font-semibold",children:h.totalHabits})]}),(0,r.jsxs)("div",{className:"p-3 card",children:[r.jsx("div",{className:"text-slate-500",children:"Total completions"}),r.jsx("div",{className:"text-xl font-semibold",children:h.totalCompletions})]}),(0,r.jsxs)("div",{className:"p-3 card",children:[r.jsx("div",{className:"text-slate-500",children:"Today"}),r.jsx("div",{className:"text-xl font-semibold",children:new Date().toLocaleDateString()})]})]}),r.jsx("div",{className:"flex justify-end mb-4",children:(0,r.jsxs)("button",{onClick:()=>m(!0),className:"btn btn-primary",children:[r.jsx("span",{className:"text-white align-middle material-icons",children:"add"}),r.jsx("span",{className:"ml-1 align-middle",children:"New Habit"})]})}),0===e.length?(0,r.jsxs)("div",{className:"p-6 text-center card",children:[r.jsx("div",{className:"mb-2 text-lg font-semibold",children:"No habits yet"}),r.jsx("p",{className:"mb-4 text-sm text-slate-600",children:"Create your first habit to start tracking progress."}),(0,r.jsxs)("button",{onClick:()=>m(!0),className:"btn btn-primary",children:[r.jsx("span",{className:"text-white align-middle material-icons",children:"add"}),r.jsx("span",{className:"ml-1 align-middle",children:"Create Habit"})]})]}):(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-4 xl:grid-cols-2",children:[r.jsx("div",{className:"space-y-3",children:r.jsx(l.Z,{})}),r.jsx("div",{className:"space-y-3",children:(0,r.jsxs)("div",{className:"p-4 card",children:[r.jsx("h2",{className:"mb-2 text-lg font-semibold",children:"Tips"}),(0,r.jsxs)("ul",{className:"pl-5 text-sm list-disc text-slate-700",children:[r.jsx("li",{children:"Use the plus button to add new habits."}),r.jsx("li",{children:"Click a habit name to view detailed stats."}),r.jsx("li",{children:"Undo removes the latest completion in the current period."})]})]})})]}),r.jsx(o.Z,{isOpen:u,onClose:()=>m(!1),title:"Create Habit",children:r.jsx(c.Z,{onSubmit:function(e){n(e)&&m(!1)},onCancel:()=>m(!1)})})]})}[i,l,c]=d.then?(await d)():d,n()}catch(e){n(e)}})},3801:(e,t,a)=>{a.a(e,async(e,n)=>{try{a.d(t,{Z:()=>o});var r=a(997);a(6689);var s=a(1499),i=a(4661),l=e([s]);function o(){let{login:e,isLoading:t,error:a,isAuthenticated:n,clearError:l}=(0,s.t)();(0,i.useNavigate)();let o=async()=>{l(),await e()};return r.jsx("div",{className:"min-h-screen flex items-center justify-center",style:{backgroundColor:"#f8f3e7"},children:(0,r.jsxs)("div",{className:"max-w-md w-full space-y-8 p-8 card",children:[(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("h2",{className:"mt-6 text-3xl font-extrabold text-slate-900",children:"Welcome to Habit Tracker"}),r.jsx("p",{className:"mt-2 text-sm text-slate-600",children:"Sign in with your Microsoft account to get started"})]}),(0,r.jsxs)("div",{className:"mt-8",children:[a&&r.jsx("div",{className:"mb-4 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:a}),(0,r.jsxs)("button",{onClick:o,disabled:t,className:"group relative w-full flex justify-center py-3 px-4 btn btn-primary",children:[r.jsx("span",{className:"absolute left-0 inset-y-0 flex items-center pl-3",children:(0,r.jsxs)("svg",{className:"h-5 w-5 text-slate-300",viewBox:"0 0 20 20",fill:"currentColor",children:[r.jsx("path",{fillRule:"evenodd",d:"M10 0C4.477 0 0 4.477 0 10s4.477 10 10 10 10-4.477 10-10S15.523 0 10 0zm0 18C5.589 18 2 14.411 2 10S5.589 2 10 2s8 3.589 8 8-3.589 8-8 8z",clipRule:"evenodd"}),r.jsx("path",{fillRule:"evenodd",d:"M13.5 8.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM6.5 8.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0z",clipRule:"evenodd"})]})}),t?"Signing in...":"Sign in with Microsoft"]}),r.jsx("div",{className:"mt-6 text-center",children:(0,r.jsxs)("div",{className:"text-xs text-slate-500",children:["By signing in, you agree to use this application for habit tracking purposes.",r.jsx("br",{}),"Your Microsoft account information will be used to create a secure profile."]})})]})]})})}s=(l.then?(await l)():l)[0],n()}catch(e){n(e)}})},9481:(e,t,a)=>{a.d(t,{E:()=>s});var n=a(2902),r=a(5190);function s(e,t){let a=(0,n.Q)(e);return isNaN(t)?(0,r.L)(e,NaN):(t&&a.setDate(a.getDate()+t),a)}},4422:(e,t,a)=>{a.d(t,{z:()=>s});var n=a(2902),r=a(5190);function s(e,t){let a=(0,n.Q)(e);if(isNaN(t))return(0,r.L)(e,NaN);if(!t)return a;let s=a.getDate(),i=(0,r.L)(e,a.getTime());return(i.setMonth(a.getMonth()+t+1,0),s>=i.getDate())?i:(a.setFullYear(i.getFullYear(),i.getMonth(),s),a)}},4172:(e,t,a)=>{a.d(t,{dP:()=>r,jE:()=>n});let n=6048e5,r=864e5},5190:(e,t,a)=>{function n(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}a.d(t,{L:()=>n})},5844:(e,t,a)=>{a.d(t,{y:()=>r});var n=a(5190);function r(e){return(0,n.L)(e,Date.now())}},7773:(e,t,a)=>{a.d(t,{w:()=>l});var n=a(4172),r=a(3902),s=a(2902);function i(e){let t=(0,s.Q)(e),a=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return a.setUTCFullYear(t.getFullYear()),+e-+a}function l(e,t){let a=(0,r.b)(e),s=(0,r.b)(t);return Math.round((+a-i(a)-(+s-i(s)))/n.dP)}},5005:(e,t,a)=>{a.d(t,{D:()=>r});var n=a(2902);function r(e,t){let a=(0,n.Q)(e.start),r=(0,n.Q)(e.end),s=+a>+r,i=s?+a:+r,l=s?r:a;l.setHours(0,0,0,0);let o=t?.step??1;if(!o)return[];o<0&&(o=-o,s=!s);let c=[];for(;+l<=i;)c.push((0,n.Q)(l)),l.setDate(l.getDate()+o),l.setHours(0,0,0,0);return s?c.reverse():c}},404:(e,t,a)=>{a.d(t,{WU:()=>A});let n={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function r(e){return (t={})=>{let a=t.width?String(t.width):e.defaultWidth;return e.formats[a]||e.formats[e.defaultWidth]}}let s={date:r({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:r({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:r({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},i={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function l(e){return(t,a)=>{let n;if("formatting"===(a?.context?String(a.context):"standalone")&&e.formattingValues){let t=e.defaultFormattingWidth||e.defaultWidth,r=a?.width?String(a.width):t;n=e.formattingValues[r]||e.formattingValues[t]}else{let t=e.defaultWidth,r=a?.width?String(a.width):e.defaultWidth;n=e.values[r]||e.values[t]}return n[e.argumentCallback?e.argumentCallback(t):t]}}function o(e){return(t,a={})=>{let n;let r=a.width,s=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],i=t.match(s);if(!i)return null;let l=i[0],o=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(o)?function(e,t){for(let a=0;a<e.length;a++)if(t(e[a]))return a}(o,e=>e.test(l)):function(e,t){for(let a in e)if(Object.prototype.hasOwnProperty.call(e,a)&&t(e[a]))return a}(o,e=>e.test(l));return n=e.valueCallback?e.valueCallback(c):c,{value:n=a.valueCallback?a.valueCallback(n):n,rest:t.slice(l.length)}}}let c={code:"en-US",formatDistance:(e,t,a)=>{let r;let s=n[e];return(r="string"==typeof s?s:1===t?s.one:s.other.replace("{{count}}",t.toString()),a?.addSuffix)?a.comparison&&a.comparison>0?"in "+r:r+" ago":r},formatLong:s,formatRelative:(e,t,a,n)=>i[e],localize:{ordinalNumber:(e,t)=>{let a=Number(e),n=a%100;if(n>20||n<10)switch(n%10){case 1:return a+"st";case 2:return a+"nd";case 3:return a+"rd"}return a+"th"},era:l({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:l({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:l({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:l({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:l({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:function(e){return(t,a={})=>{let n=t.match(e.matchPattern);if(!n)return null;let r=n[0],s=t.match(e.parsePattern);if(!s)return null;let i=e.valueCallback?e.valueCallback(s[0]):s[0];return{value:i=a.valueCallback?a.valueCallback(i):i,rest:t.slice(r.length)}}}({matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)}),era:o({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:o({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:o({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:o({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:o({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}},d={};var u=a(7773),m=a(2902),h=a(5190),x=a(4172);function f(e,t){let a=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??d.weekStartsOn??d.locale?.options?.weekStartsOn??0,n=(0,m.Q)(e),r=n.getDay();return n.setDate(n.getDate()-((r<a?7:0)+r-a)),n.setHours(0,0,0,0),n}function b(e){return f(e,{weekStartsOn:1})}function g(e){let t=(0,m.Q)(e),a=t.getFullYear(),n=(0,h.L)(e,0);n.setFullYear(a+1,0,4),n.setHours(0,0,0,0);let r=b(n),s=(0,h.L)(e,0);s.setFullYear(a,0,4),s.setHours(0,0,0,0);let i=b(s);return t.getTime()>=r.getTime()?a+1:t.getTime()>=i.getTime()?a:a-1}function p(e,t){let a=(0,m.Q)(e),n=a.getFullYear(),r=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??d.firstWeekContainsDate??d.locale?.options?.firstWeekContainsDate??1,s=(0,h.L)(e,0);s.setFullYear(n+1,0,r),s.setHours(0,0,0,0);let i=f(s,t),l=(0,h.L)(e,0);l.setFullYear(n,0,r),l.setHours(0,0,0,0);let o=f(l,t);return a.getTime()>=i.getTime()?n+1:a.getTime()>=o.getTime()?n:n-1}function y(e,t){let a=Math.abs(e).toString().padStart(t,"0");return(e<0?"-":"")+a}let w={y(e,t){let a=e.getFullYear(),n=a>0?a:1-a;return y("yy"===t?n%100:n,t.length)},M(e,t){let a=e.getMonth();return"M"===t?String(a+1):y(a+1,2)},d:(e,t)=>y(e.getDate(),t.length),a(e,t){let a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return a.toUpperCase();case"aaa":return a;case"aaaaa":return a[0];default:return"am"===a?"a.m.":"p.m."}},h:(e,t)=>y(e.getHours()%12||12,t.length),H:(e,t)=>y(e.getHours(),t.length),m:(e,t)=>y(e.getMinutes(),t.length),s:(e,t)=>y(e.getSeconds(),t.length),S(e,t){let a=t.length;return y(Math.trunc(e.getMilliseconds()*Math.pow(10,a-3)),t.length)}},j={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},v={G:function(e,t,a){let n=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return a.era(n,{width:"abbreviated"});case"GGGGG":return a.era(n,{width:"narrow"});default:return a.era(n,{width:"wide"})}},y:function(e,t,a){if("yo"===t){let t=e.getFullYear();return a.ordinalNumber(t>0?t:1-t,{unit:"year"})}return w.y(e,t)},Y:function(e,t,a,n){let r=p(e,n),s=r>0?r:1-r;return"YY"===t?y(s%100,2):"Yo"===t?a.ordinalNumber(s,{unit:"year"}):y(s,t.length)},R:function(e,t){return y(g(e),t.length)},u:function(e,t){return y(e.getFullYear(),t.length)},Q:function(e,t,a){let n=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return y(n,2);case"Qo":return a.ordinalNumber(n,{unit:"quarter"});case"QQQ":return a.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return a.quarter(n,{width:"narrow",context:"formatting"});default:return a.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,a){let n=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return y(n,2);case"qo":return a.ordinalNumber(n,{unit:"quarter"});case"qqq":return a.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return a.quarter(n,{width:"narrow",context:"standalone"});default:return a.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,a){let n=e.getMonth();switch(t){case"M":case"MM":return w.M(e,t);case"Mo":return a.ordinalNumber(n+1,{unit:"month"});case"MMM":return a.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return a.month(n,{width:"narrow",context:"formatting"});default:return a.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,a){let n=e.getMonth();switch(t){case"L":return String(n+1);case"LL":return y(n+1,2);case"Lo":return a.ordinalNumber(n+1,{unit:"month"});case"LLL":return a.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return a.month(n,{width:"narrow",context:"standalone"});default:return a.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,a,n){let r=function(e,t){let a=(0,m.Q)(e);return Math.round((+f(a,t)-+function(e,t){let a=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??d.firstWeekContainsDate??d.locale?.options?.firstWeekContainsDate??1,n=p(e,t),r=(0,h.L)(e,0);return r.setFullYear(n,0,a),r.setHours(0,0,0,0),f(r,t)}(a,t))/x.jE)+1}(e,n);return"wo"===t?a.ordinalNumber(r,{unit:"week"}):y(r,t.length)},I:function(e,t,a){let n=function(e){let t=(0,m.Q)(e);return Math.round((+b(t)-+function(e){let t=g(e),a=(0,h.L)(e,0);return a.setFullYear(t,0,4),a.setHours(0,0,0,0),b(a)}(t))/x.jE)+1}(e);return"Io"===t?a.ordinalNumber(n,{unit:"week"}):y(n,t.length)},d:function(e,t,a){return"do"===t?a.ordinalNumber(e.getDate(),{unit:"date"}):w.d(e,t)},D:function(e,t,a){let n=function(e){let t=(0,m.Q)(e);return(0,u.w)(t,function(e){let t=(0,m.Q)(e),a=(0,h.L)(e,0);return a.setFullYear(t.getFullYear(),0,1),a.setHours(0,0,0,0),a}(t))+1}(e);return"Do"===t?a.ordinalNumber(n,{unit:"dayOfYear"}):y(n,t.length)},E:function(e,t,a){let n=e.getDay();switch(t){case"E":case"EE":case"EEE":return a.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return a.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return a.day(n,{width:"short",context:"formatting"});default:return a.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,a,n){let r=e.getDay(),s=(r-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(s);case"ee":return y(s,2);case"eo":return a.ordinalNumber(s,{unit:"day"});case"eee":return a.day(r,{width:"abbreviated",context:"formatting"});case"eeeee":return a.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return a.day(r,{width:"short",context:"formatting"});default:return a.day(r,{width:"wide",context:"formatting"})}},c:function(e,t,a,n){let r=e.getDay(),s=(r-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(s);case"cc":return y(s,t.length);case"co":return a.ordinalNumber(s,{unit:"day"});case"ccc":return a.day(r,{width:"abbreviated",context:"standalone"});case"ccccc":return a.day(r,{width:"narrow",context:"standalone"});case"cccccc":return a.day(r,{width:"short",context:"standalone"});default:return a.day(r,{width:"wide",context:"standalone"})}},i:function(e,t,a){let n=e.getDay(),r=0===n?7:n;switch(t){case"i":return String(r);case"ii":return y(r,t.length);case"io":return a.ordinalNumber(r,{unit:"day"});case"iii":return a.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return a.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return a.day(n,{width:"short",context:"formatting"});default:return a.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,a){let n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return a.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"aaa":return a.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return a.dayPeriod(n,{width:"narrow",context:"formatting"});default:return a.dayPeriod(n,{width:"wide",context:"formatting"})}},b:function(e,t,a){let n;let r=e.getHours();switch(n=12===r?j.noon:0===r?j.midnight:r/12>=1?"pm":"am",t){case"b":case"bb":return a.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"bbb":return a.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return a.dayPeriod(n,{width:"narrow",context:"formatting"});default:return a.dayPeriod(n,{width:"wide",context:"formatting"})}},B:function(e,t,a){let n;let r=e.getHours();switch(n=r>=17?j.evening:r>=12?j.afternoon:r>=4?j.morning:j.night,t){case"B":case"BB":case"BBB":return a.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"BBBBB":return a.dayPeriod(n,{width:"narrow",context:"formatting"});default:return a.dayPeriod(n,{width:"wide",context:"formatting"})}},h:function(e,t,a){if("ho"===t){let t=e.getHours()%12;return 0===t&&(t=12),a.ordinalNumber(t,{unit:"hour"})}return w.h(e,t)},H:function(e,t,a){return"Ho"===t?a.ordinalNumber(e.getHours(),{unit:"hour"}):w.H(e,t)},K:function(e,t,a){let n=e.getHours()%12;return"Ko"===t?a.ordinalNumber(n,{unit:"hour"}):y(n,t.length)},k:function(e,t,a){let n=e.getHours();return(0===n&&(n=24),"ko"===t)?a.ordinalNumber(n,{unit:"hour"}):y(n,t.length)},m:function(e,t,a){return"mo"===t?a.ordinalNumber(e.getMinutes(),{unit:"minute"}):w.m(e,t)},s:function(e,t,a){return"so"===t?a.ordinalNumber(e.getSeconds(),{unit:"second"}):w.s(e,t)},S:function(e,t){return w.S(e,t)},X:function(e,t,a){let n=e.getTimezoneOffset();if(0===n)return"Z";switch(t){case"X":return k(n);case"XXXX":case"XX":return M(n);default:return M(n,":")}},x:function(e,t,a){let n=e.getTimezoneOffset();switch(t){case"x":return k(n);case"xxxx":case"xx":return M(n);default:return M(n,":")}},O:function(e,t,a){let n=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+N(n,":");default:return"GMT"+M(n,":")}},z:function(e,t,a){let n=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+N(n,":");default:return"GMT"+M(n,":")}},t:function(e,t,a){return y(Math.trunc(e.getTime()/1e3),t.length)},T:function(e,t,a){return y(e.getTime(),t.length)}};function N(e,t=""){let a=e>0?"-":"+",n=Math.abs(e),r=Math.trunc(n/60),s=n%60;return 0===s?a+String(r):a+String(r)+t+y(s,2)}function k(e,t){return e%60==0?(e>0?"-":"+")+y(Math.abs(e)/60,2):M(e,t)}function M(e,t=""){let a=Math.abs(e);return(e>0?"-":"+")+y(Math.trunc(a/60),2)+t+y(a%60,2)}let C=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},T=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},D={p:T,P:(e,t)=>{let a;let n=e.match(/(P+)(p+)?/)||[],r=n[1],s=n[2];if(!s)return C(e,t);switch(r){case"P":a=t.dateTime({width:"short"});break;case"PP":a=t.dateTime({width:"medium"});break;case"PPP":a=t.dateTime({width:"long"});break;default:a=t.dateTime({width:"full"})}return a.replace("{{date}}",C(r,t)).replace("{{time}}",T(s,t))}},S=/^D+$/,P=/^Y+$/,E=["D","DD","YY","YYYY"],L=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,q=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,W=/^'([^]*?)'?$/,$=/''/g,F=/[a-zA-Z]/;function A(e,t,a){let n=a?.locale??d.locale??c,r=a?.firstWeekContainsDate??a?.locale?.options?.firstWeekContainsDate??d.firstWeekContainsDate??d.locale?.options?.firstWeekContainsDate??1,s=a?.weekStartsOn??a?.locale?.options?.weekStartsOn??d.weekStartsOn??d.locale?.options?.weekStartsOn??0,i=(0,m.Q)(e);if(!((i instanceof Date||"object"==typeof i&&"[object Date]"===Object.prototype.toString.call(i)||"number"==typeof i)&&!isNaN(Number((0,m.Q)(i)))))throw RangeError("Invalid time value");let l=t.match(q).map(e=>{let t=e[0];return"p"===t||"P"===t?(0,D[t])(e,n.formatLong):e}).join("").match(L).map(e=>{if("''"===e)return{isToken:!1,value:"'"};let t=e[0];if("'"===t)return{isToken:!1,value:function(e){let t=e.match(W);return t?t[1].replace($,"'"):e}(e)};if(v[t])return{isToken:!0,value:e};if(t.match(F))throw RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return{isToken:!1,value:e}});n.localize.preprocessor&&(l=n.localize.preprocessor(i,l));let o={firstWeekContainsDate:r,weekStartsOn:s,locale:n};return l.map(r=>{if(!r.isToken)return r.value;let s=r.value;return(!a?.useAdditionalWeekYearTokens&&P.test(s)||!a?.useAdditionalDayOfYearTokens&&S.test(s))&&function(e,t,a){let n=function(e,t,a){let n="Y"===e[0]?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${n} to the input \`${a}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}(e,t,a);if(console.warn(n),E.includes(e))throw RangeError(n)}(s,t,String(e)),(0,v[s[0]])(i,s,n.localize,o)}).join("")}},2184:(e,t,a)=>{a.d(t,{w:()=>r});var n=a(2902);function r(e){return(0,n.Q)(e).getDay()}},9126:(e,t,a)=>{a.d(t,{K:()=>r});var n=a(3902);function r(e,t){return+(0,n.b)(e)==+(0,n.b)(t)}},7507:(e,t,a)=>{a.d(t,{z:()=>s});var n=a(5844),r=a(9126);function s(e){return(0,r.K)(e,(0,n.y)(e))}},2449:(e,t,a)=>{a.d(t,{g:()=>i});var n=a(5844),r=a(9126),s=a(9481);function i(e){var t;return(0,r.K)(e,(t=(0,n.y)(e),(0,s.E)(t,-1)))}},3902:(e,t,a)=>{a.d(t,{b:()=>r});var n=a(2902);function r(e){let t=(0,n.Q)(e);return t.setHours(0,0,0,0),t}},4102:(e,t,a)=>{a.d(t,{N:()=>r});var n=a(2902);function r(e){let t=(0,n.Q)(e);return t.setDate(1),t.setHours(0,0,0,0),t}},2902:(e,t,a)=>{function n(e){let t=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===t?new e.constructor(+e):new Date("number"==typeof e||"[object Number]"===t||"string"==typeof e||"[object String]"===t?e:NaN)}a.d(t,{Q:()=>n})},2550:(e,t,a)=>{a.a(e,async(e,n)=>{try{a.d(t,{Cv:()=>o,E4:()=>m,FY:()=>h,IY:()=>u,Jo:()=>l,Mb:()=>c,Ux:()=>d});var r=a(1499),s=e([r]);async function i(e,t={}){try{let a=await r.t.getState().getAccessToken(),n=await fetch(`http://localhost:3001/api${e}`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`,...t.headers},...t});if(!n.ok){if(401===n.status)throw r.t.getState().logout(),Error("Authentication required");throw Error(`API Error: ${n.status} ${n.statusText}`)}return await n.json()}catch(e){if(console.error("API request failed:",e),"Authentication required"===e.message)throw e;throw Error("Persistence unavailable")}}async function l(){return await i("/habits")}async function o(e){return e.id?await i(`/habits/${e.id}`,{method:"PUT",body:JSON.stringify(e)}):await i("/habits",{method:"POST",body:JSON.stringify(e)})}async function c(e){await i(`/habits/${e}`,{method:"DELETE"})}async function d(){return await i("/completions")}async function u(e){return await i(`/completions?habitId=${e}`)}async function m(e,t){return await i("/completions",{method:"POST",body:JSON.stringify({habitId:e,timestamp:t})})}async function h(e){await i(`/completions/${e}`,{method:"DELETE"})}r=(s.then?(await s)():s)[0],n()}catch(e){n(e)}})},1499:(e,t,a)=>{a.a(e,async(e,n)=>{try{a.d(t,{t:()=>d});var r=a(6912),s=a(4872),i=e([r,s]);[r,s]=i.then?(await i)():i;let l={auth:{clientId:"68357b1a-48ee-462c-9bb4-3a7e6a008ef6",authority:"https://login.microsoftonline.com/c1f3dc23-b7f8-48d3-9b5d-2b12f158f01f",redirectUri:window.location.origin,postLogoutRedirectUri:window.location.origin,navigateToLoginRequestUrl:!1},cache:{cacheLocation:"sessionStorage",storeAuthStateInCookie:!1},system:{allowNativeBroker:!1,loggerOptions:{loggerCallback:(e,t,a)=>{if(!a)switch(e){case"Error":console.error(t);return;case"Info":console.info(t);return;case"Verbose":console.debug(t);return;case"Warning":console.warn(t);return;default:return}}}}},o=new s.PublicClientApplication(l),c={scopes:["User.Read"],prompt:"select_account"},d=(0,r.create)((e,t)=>({user:null,isAuthenticated:!1,isLoading:!0,error:null,accessToken:null,async initialize(){try{await o.initialize();let a=o.getAllAccounts();if(a.length>0){let n=a[0];o.setActiveAccount(n);try{let e=await o.acquireTokenSilent({...c,account:n});await t().verifyWithBackend(e.accessToken)}catch{console.log("Silent token acquisition failed, user needs to login again"),e({isLoading:!1})}}else e({isLoading:!1})}catch(t){console.error("MSAL initialization failed:",t),e({error:"Failed to initialize authentication",isLoading:!1})}},async login(){e({isLoading:!0,error:null});try{let e=await o.loginPopup(c);e&&(o.setActiveAccount(e.account),await t().verifyWithBackend(e.accessToken))}catch(t){console.error("Login failed:",t),e({error:"Failed to login with Microsoft. Please try again.",isLoading:!1})}},async logout(){try{o.getActiveAccount()&&o.setActiveAccount(null),e({user:null,isAuthenticated:!1,accessToken:null,error:null,isLoading:!1})}catch(t){console.error("Logout failed:",t),e({user:null,isAuthenticated:!1,accessToken:null,error:null,isLoading:!1})}},async getAccessToken(){try{let t=o.getActiveAccount();if(!t)throw Error("No active account");let a=await o.acquireTokenSilent({...c,account:t});return e({accessToken:a.accessToken}),a.accessToken}catch(t){console.error("Token acquisition failed:",t);try{let t=await o.acquireTokenPopup(c);return e({accessToken:t.accessToken}),t.accessToken}catch(e){throw console.error("Interactive token acquisition failed:",e),e}}},async verifyWithBackend(t){try{let a=await fetch("http://localhost:3001/api/auth/microsoft",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({accessToken:t})});if(!a.ok)throw Error("Backend verification failed");let n=await a.json();e({user:n.user,accessToken:t,isAuthenticated:!0,isLoading:!1,error:null})}catch(t){throw console.error("Backend verification failed:",t),e({error:"Failed to verify user with backend",isLoading:!1,isAuthenticated:!1}),t}},clearError(){e({error:null})}}));d.getState().initialize(),n()}catch(e){n(e)}})},6658:(e,t,a)=>{a.a(e,async(e,n)=>{try{a.d(t,{F:()=>o});var r=a(6912),s=a(2550),i=a(1814),l=e([r,s]);[r,s]=l.then?(await l)():l;let o=(0,r.create)((e,t)=>({habits:[],completions:[],persistenceError:null,async rehydrate(){try{let t=await (0,s.Jo)(),a=await (0,s.Ux)();e({habits:t,completions:a,persistenceError:null})}catch(t){e({persistenceError:"Data storage is unavailable. Changes will not persist."})}},async createHabit(t){try{let a=await (0,s.Cv)(t);return e(e=>({habits:[...e.habits,a],persistenceError:null})),a}catch(t){return e({persistenceError:"Failed to save habit."}),null}},async updateHabit(a,n){try{let r=t().habits.find(e=>e.id===a);if(!r)return null;let i=await (0,s.Cv)({...r,...n});return e(e=>({habits:e.habits.map(e=>e.id===a?i:e),persistenceError:null})),i}catch(t){return e({persistenceError:"Failed to update habit."}),null}},async deleteHabit(t){try{await (0,s.Mb)(t),e(e=>({habits:e.habits.filter(e=>e.id!==t),completions:e.completions.filter(e=>e.habitId!==t),persistenceError:null}))}catch(t){e({persistenceError:"Failed to delete habit."})}},async addCompletion(a,n=Date.now()){let r=t().habits.find(e=>e.id===a);if(!r||!(0,i.n0)(r,n))return null;let{start:l,end:o}=(0,i.p6)(r);if(t().completions.filter(e=>e.habitId===a&&e.timestamp>=l&&e.timestamp<o).length>=r.frequency)return null;try{let t=await (0,s.E4)(a,n);return e(e=>({completions:[...e.completions,t],persistenceError:null})),t}catch(t){return e({persistenceError:"Failed to add completion."}),null}},async undoLastCompletion(a){let n=t().habits.find(e=>e.id===a);if(!n)return null;let{start:r,end:l}=(0,i.p6)(n),o=t().completions.filter(e=>e.habitId===a&&e.timestamp>=r&&e.timestamp<l).sort((e,t)=>t.timestamp-e.timestamp);if(0===o.length)return null;let c=o[0];try{return await (0,s.FY)(c.id),e(e=>({completions:e.completions.filter(e=>e.id!==c.id),persistenceError:null})),c}catch(t){return e({persistenceError:"Failed to undo completion."}),null}},async listCompletions(t){try{return await (0,s.IY)(t)}catch(t){return e({persistenceError:"Failed to load completions."}),[]}}}));n()}catch(e){n(e)}})},7541:(e,t,a)=>{a.d(t,{GR:()=>i,e0:()=>o,u8:()=>c,wm:()=>l});var n=a(1814);function r(e,t){let a=new Map;for(let r of t){let t=(0,n.NM)(e,r.timestamp),s=a.get(t)||[];s.push(r),a.set(t,s)}return a}function s(e,t){return(t?.length||0)>=e.frequency}function i(e,t){let{start:a,end:r}=(0,n.p6)(e),s=Math.min(t.filter(e=>e.timestamp>=a&&e.timestamp<r).length,e.frequency),i=Math.min(1,s/e.frequency);return{value:s,required:e.frequency,ratio:i}}function l(e,t){let a=(0,n.i8)(e),i=r(e,t),l=0;for(let t=a;t>=0&&s(e,i.get(t));t--)l+=1;let o=0,c=0;for(let t=0;t<=a;t++)s(e,i.get(t))?(c+=1)>o&&(o=c):c=0;return{currentStreak:l,bestStreak:o}}function o(e,t){let a=(0,n.i8)(e),i=r(e,t),l=0;for(let t=0;t<a;t++)s(e,i.get(t))||(l+=1);return l}function c(e,t){let a=r(e,t),n=0;for(let e of a.values())e.length>n&&(n=e.length);return n}},1814:(e,t,a)=>{a.d(t,{wc:()=>m,mI:()=>c,p6:()=>d,i8:()=>g,gx:()=>x,QL:()=>u,NM:()=>b,sm:()=>h,n0:()=>f});var n=a(3902),r=a(9481),s=a(4102),i=a(4422),l=a(7773),o=a(2902);function c(e,t=Date.now()){return Math.max((0,n.b)(new Date(t)).getTime(),(0,n.b)(new Date(e.startDate?e.startDate:e.createdAt)).getTime())}function d(e,t=Date.now()){let a=new Date(t);if("daily"===e.periodType)return{start:(0,n.b)(a).getTime(),end:(0,r.E)((0,n.b)(a),1).getTime()};if("monthly"===e.periodType)return{start:(0,s.N)(a).getTime(),end:(0,i.z)((0,s.N)(a),1).getTime()};let o=(0,n.b)(new Date(c(e,t))),d=Math.floor(Math.max(0,(0,l.w)(a,o))/7);return{start:(0,r.E)(o,7*d).getTime(),end:(0,r.E)(o,(d+1)*7).getTime()}}function u(e,t=Date.now()){let{end:a}=d(e,t);return Math.max(0,a-t)}function m(e){let t=Math.max(0,Math.floor(e/1e3)),a=Math.floor(t/60),n=Math.floor(a/60),r=Math.floor(n/24);return r>=1?`${r}d`:n>=1?`${n}h`:a>=1?`${a}m`:`${t}s`}function h(e){return"weekly"===e?"Weekly":"monthly"===e?"Monthly":"Daily"}function x(e){return"weekly"===e.periodType?"This week":"monthly"===e.periodType?"This month":"Today"}function f(e,t,a=Date.now()){let{start:n,end:r}=d(e,a);return t>=n&&t<r}function b(e,t){let a=(0,n.b)(new Date(c(e))),r=new Date(t);return"daily"===e.periodType?(0,l.w)((0,n.b)(r),a):"monthly"===e.periodType?function(e,t){let a=(0,o.Q)(e),n=(0,o.Q)(t);return 12*(a.getFullYear()-n.getFullYear())+(a.getMonth()-n.getMonth())}((0,s.N)(r),(0,s.N)(a)):Math.floor((0,l.w)((0,n.b)(r),a)/7)}function g(e,t=Date.now()){return b(e,t)}}};